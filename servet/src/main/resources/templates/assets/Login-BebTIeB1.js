import{_ as f,E as p,h as t,s as a,o as m,y as c,e as s,b as i,w as h,a9 as k,L as I,k as v,aa as y,d as u,p as E,n as V}from"./index-W_Z73pLO.js";/* empty css                *//* empty css                  *//* empty css                 */const x={name:"login",beforeRouteEnter(e,o,r){window.scrollTo(0,0),r()},data(){return{name:"",password:"",showError:!1}},mounted(){this.name="",this.password=""},computed:{disabled(){return this.name.length===0||this.password.length===0}},methods:{login(){this.$http.post("/userlogin",{username:this.name,password:this.password}).then(e=>{e.data.code===200?(console.log("Login response:",e.data),localStorage.setItem("token",e.data.data),console.log("Token stored in local storage:",localStorage.getItem("token")),p({message:t("p",{style:"line-height: 1; font-size: 14px"},[t("span",null,"用户"),t("i",{style:"color: teal"},this.name,"已经登陆成功")])}),this.$http.post("/getuserid/"+this.name).then(o=>{console.log("获取用户信息id"),console.log(o.data),a.commit("setUserID",o.data)}),a.commit("setUsername",this.name,this.password),a.commit("setLoggedIn","退出登陆"),console.log(a.state.userID+"登陆成功"),setTimeout(()=>{this.$router.push("/")},400)):(console.log("登陆失败"),p({message:t("p",{style:"line-height: 1; font-size: 14px"},[t("span",null,"用户"),t("i",{style:"color: teal"},this.name,"登陆失败")])}),a.commit("setLoggedIn","登陆"))}).catch(e=>{console.log(e),this.$message.error("用户名或密码错误！"),this.showError=!0})}}},L=e=>(E("data-v-4d9ff207"),e=e(),V(),e),C={id:"container"},S=L(()=>s("div",{id:"title"},[s("h1",null,"GYM管理系统")],-1)),b={class:"input"},B={class:"input"},N={class:"input"},T={class:"input"},U={key:0,class:"error-message"};function $(e,o,r,z,n,g){const d=I,_=v,w=y;return m(),c("div",C,[S,s("div",b,[i(d,{modelValue:n.name,"onUpdate:modelValue":o[0]||(o[0]=l=>n.name=l),placeholder:"请输入用户名"},null,8,["modelValue"])]),s("div",B,[i(d,{modelValue:n.password,"onUpdate:modelValue":o[1]||(o[1]=l=>n.password=l),placeholder:"请输入密码","auto-complete":"new-password","show-password":""},null,8,["modelValue"])]),s("div",N,[i(_,{onClick:g.login,style:{width:"500px"},type:"primary"},{default:h(()=>[u("登录")]),_:1},8,["onClick"])]),s("div",T,[i(w,{type:"primary",onClick:o[2]||(o[2]=l=>e.$router.push("/adminlogin"))},{default:h(()=>[u("管理员登陆")]),_:1})]),n.showError?(m(),c("div",U,"Invalid username or password")):k("",!0)])}const Y=f(x,[["render",$],["__scopeId","data-v-4d9ff207"]]);export{Y as default};
